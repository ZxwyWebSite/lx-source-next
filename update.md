## lx-source/更新日志

### \# 2025-11-15 v1.1.11

- 完善 `Prefetch` WY 识别无版权歌曲
- 优化 播放器移动端歌词展示效果
- 修复 获取统计数据时应使用原子操作
- 添加 仅接口模式 `[Apis].ApiOnly` 不挂载 `PublicFS` 前端文件
- 添加 `KW` 搜索支持（暂不支持歌词模式）

### \# 2025-11-09 v1.1.10

- 完善 `Prefetch` 条件获取实现
- 构建 使用 [`nomsgpack`](https://github.com/gin-gonic/gin/pull/1852) 排除未使用依赖，缩减文件大小
- 优化 二级目录支持
- 添加 更新脚本时自动附加 key (暂时无用)
- 添加 搜索时展示歌曲更多信息
- 其它 仅提供主流平台 CDN 链接

### \# 2025-10-25 v1.1.9

- 重构 黑白名单 `ipset` 实现，使用二分查找，提升大数据集查询效率，单次查询耗时降低至 `5µs` 左右
- 添加 `lrc` 方法 `?jmp` 返回拼接后的歌词文件
- 优化 完善缓存标头
- 添加 `MusicSDK/WY.SongDownloadUrl(V1)` 下载接口，用于绕过播放接口游客最高只能获取 `320k` 限制
- 新增 `WY` 条件获取：免费资源使用游客账号解析，尝试降低封号概率。由于需要查询详情，可能增加响应时间，需手动开启（还有架构问题，待后期优化）
- 添加 `WY` 日推打卡功能 (测试版本)

### \# 2025-10-12 v1.1.8

- [251012] 优化 网页版 详情支持原平台打开
- [251012] 优化 网页版 表单支持回车提交
- [251012] 添加 `pic` 封面接口，支持 `s(mall)` / `m(iddle)` / `l(arge)` 调整大小
- [251018] 新增 `(MusicInfo).fee` 字段，支持预判断是否为 VIP 歌曲 (`WY/KG`)
- [251018] 其它 添加接口文档

### \# 2025-10-08 v1.1.7

- [251004] 优化 Nginx 请求头支持（用于自动获取请求 URL）
- [251007] 其它 添加配置文档
- [251007] 优化 脚本下载接口，支持使用 `/api/v0/script`
- [251008] 修复 同步 `builtin/toubiec` 解析接口
- [251008] 兼容 映射音质 `fl24`, `hires` -> `flac24bit`; `atmos` -> `dolby` 👿

### \# 2025-10-02 v1.1.6

- 修复 `Windows` 平台 无法解析时区的问题（已换源更新）
- 优化 网页版 听歌识曲 UI
- 支持 `WY` 每日签到功能（PC 端）
- 优化 `WY` 账号登录逻辑
- 支持 `KW/KG` 伪装 IP（海外服务器）
- 支持 黑白名单 从文件添加 IP 列表（格式 `#文件路径`，换行分隔）
- 调整 黑白名单 逻辑：白名单无条件信任，会跳过后续速率限制，建议仅保留内网 IP；开启严格模式后交换黑名单与普通用户位置，即允许黑名单 IP 作为普通用户使用，阻止其余 IP
- 支持 关闭控制台输出
- 优化 与 GIN 兼容性（调试输出、信任代理）
- 其它 更新试听歌单

### \# 2025-10-01 v1.1.5

- 添加 测试版 `vGroup` 模式（重构）隐藏功能需自行探索
- 合并 旧版听歌识曲（/test/match/ -> /match/demo.html）
- 优化 网页版 允许点击遮罩层关闭 Layer
- 优化 网页版 搜索详情生成 Scheme URL（合并到 common）
- 添加 `WY` 账号登录功能（仅支持短信验证码）使用 `./lxsrcs menu` 启动
- 修改 全部版本锁定为 CST 时区（Asia/Shanghai）

### \# 2025-09-27 v1.1.4

- 优化 `MusicSDK/WY` 凭据解析与应用逻辑
- 修复 配置重载时无法开启调试模式
- 添加 听歌识曲 UI（/match）
- 优化 `?jmp` 链接跳转功能

### \# 2025-09-20 v1.1.3

- 添加 `WY` 听歌识曲（/test/match）
- 修复 `Android` 时区异常问题（强制使用 CST）
- 降级 `Layui` 尝试支持老旧设备
- 优化 `MusicSDK` 部分请求逻辑
- 优化 压缩前端代码（原版仍可访问）
- 添加 音乐搜索（/search）

### \# 2025-09-13 v1.1.2

- 优化 自动重载逻辑，解决脚本参数未更新问题
- 支持 `LX` 通用对接程序（须添加 `/api/v0` 后缀）

### \# 2025-09-06 v1.1.1

- 优化 `tryst/EmbedFS` 接口透传实现，解决无法加载 `.woff` 字体问题
- 更新 `sonic` 依赖
- 尝试 解决竞态问题
- 修复 缓存检测应使用返回音质而非传入音质
- 修复 `builtin/GD Studio` 音质检测应使用 `.Br` 而非 `.Size`
- 构建 增加更多平台
- 修复 `kw/flac24bit` 导致 panic
- 调整 默认缓存分片
- 添加 自动重载配置
- 优化 `kw/debug` 二进制数据检测方法
<!-- - 优化 音乐详情返回封面大小 -->

### \# v1.1 重构主要变化

- 增加 较高 192k 音质 (部分支持)
- 增加 使用文档
- 重构 缓存模块
- 增加 WebUI

#### \# 2024-07-20 v1.1.0-rc0 (dev)

- 完成 WyApi 模块基础功能、热重载框架

#### \# 2025-08-19 (dev)

- 完善调试输出
- 兼容 v0 接口，大改并统一新版接口
